Array.prototype.shuffle=function(){var a=this.length,b,c;if(a==0)return;while(--a){b=Math.floor(Math.random()*(a+1));c=this[a];this[a]=this[b];this[b]=c}};(function($){$.fn.extend({gpImageRotate:function(a){opts=$.extend({},$.imageRotate.defaults,a);return this.each(function(){new $.imageRotate(this,opts)})}});$.imageRotate=function(obj,opts){function doAjax(a,b,c,d,e){var f=opts.return_type=="json"?"json":"text";$.ajax({type:a,url:b,data:c,dataType:f,beforeSend:d,success:e,error:showError})}function showError(a,b,c){console.log(b)}function doCreate(a){var b,c,d,e,f,g,h,i,j,k,l,m;if(opts.return_type=="list"){var n=a.split(",")}else if(a=="self"){var o=$this.attr("id");var n=new Array;if($("#"+o+" ul li").length<=1){k=$this.attr("id");$("#"+k).remove();return}$("#"+o+" ul li").each(function(a,k){g=$(this).children("a")[0];if(g){d=$(g).attr("href");c=$(g).attr("target");c=c?c:"_blank";b=$(g).children("img")[0]}else{d="";c="";b=$(this).children("img")[0]}if($(b).attr("src")=="")return;i=$(b).width();j=$(b).height();e=$(b).attr("alt");if(e==""){e=$(b).attr("title")}h=$(b).attr("src");f=$(this).children("div")[0];f=$(f).html();n[a]=new Array(h,d,e,f,c,i,j)})}else{var n=new Array;$.each(a,function(a,h){e=opts.data_map.image_title?h[opts.data_map.image_title]:h[opts.data_map.image_name];f=opts.data_map.image_desc?h[opts.data_map.image_desc]:"";d=h[opts.data_map.url_name]?h[opts.data_map.url_name]:"";c=opts.url_target;if(opts.data_map.url_target){if(h[opts.data_map.url_target])c=h[opts.data_map.url_target]}g=h.links?h.links:"";b=opts.data_map.image_name?h[opts.data_map.image_name]:"";l=opts.data_map.class_name?h[opts.data_map.class_name]:"";i=opts.data_map.image_width?h[opts.data_map.image_width]:"";j=opts.data_map.image_height?h[opts.data_map.image_height]:"";m=h.on_show?h.on_show:"";n[a]=new Array(b,d,e,f,c,l,m,g,i,j)})}totalItems=n.length;if(totalItems>0){if(stackedAR.indexOf(opts.mode)!=-1){createStackedDisplay(n)}else if(opts.mode=="simplegallery"){createGalleryDisplay(n)}else{if(opts.mode=="steps"){margTop=parseInt(opts.steps_large_height)-parseInt(opts.steps_small_height)}createLinearDisplay(n)}}else{if(a=="self"){k=$this.attr("id");$("#"+k).remove()}}}function createStackedDisplay(a){cId=$this.attr("id");if(opts.mode=="random"){var b=Math.floor(Math.random()*a.length);var c=getImageObject(a[b]);var d=createImage(b,cId,c);on_show(cId+"-gpImageRotate-DisplayCntnr-"+b)}else{var e=createImages(cId,a);startTransition()}}function createGalleryDisplay(a){$this.css("visibility","hidden");cId=$this.attr("id");createGalleryCntnr(cId);var b=createImages(cId,a);createPrimaryNavClickEvent(cId);if(opts.large_display_mode=="lightbox"){$("#"+cId+"-gpImageRotate-GalleryLargeCntnr").remove()}$this.css("visibility","visible")}function createLinearDisplay(a){cId=$this.attr("id");if(opts.image_url=="self"){$("#"+cId).html("")}createCntnr(cId);createPrimaryNavCntnr(cId);if(opts.mode=="steps"){$("#"+cId+"-gpImageRotate-Slider").css("visibility","hidden")}var b=createImages(cId,a);if(opts.mode=="steps"){$("#"+cId+"-gpImageRotate-Slider").css("visibility","visible")}createPrimaryNavClickEvent(cId);nLeft=aImages[0];displayWidth=$("#"+cId+"-gpImageRotate-DisplayCntnr-0").width();if(opts.desc_display.display=="onload"){descShow(cId,selectedIndex)}if(opts.side_nav.display=="onhover"){setSideNavHoverDisplay()}if(opts.interval){setMoveInterval()}}function startTransition(){var a=setTransitionMethods();if(opts.transition_direction=="inOut"||opts.transition_direction=="inOutIn"){transitionInMethod()}else{setTimeout(transitionOutMethod,opts.interval)}}function doFadeIn(){var a=getSelectedIndex();$("#"+cId+"-gpImageRotate-DisplayCntnr-"+a).fadeIn(opts.speed,function(){transitionStarted=true;setTimeout(transitionOutMethod,opts.interval)})}function doFadeOut(){doInOut();$("#"+cId+"-gpImageRotate-DisplayCntnr-"+selectedIndex).fadeOut(opts.speed,function(){updateSelectedIndex()})}function doZoomIn(){var a=getSelectedIndex();var b=$("#"+cId+"-gpImageRotate-DisplayCntnr-"+a).data("dim").w;var c=$("#"+cId+"-gpImageRotate-DisplayCntnr-"+a).data("dim").h;$("#"+cId+"-gpImageRotate-DisplayCntnr-"+a).css("display","block");$("#"+cId+"-gpImageRotate-DisplayCntnr-"+a).animate({left:"0",top:"0",width:b+"px",height:c+"px"},opts.speed,function(){transitionStarted=true;currentIndex=a;setPrimaryNav();setTimeout(transitionOutMethod,opts.interval)})}function doZoomOut(){doInOut();var a=$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex).data("dim").w;var b=$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex).data("dim").h;var c,d;if(opts.zoom_type=="center"){c=a/2+"px";d=b/2+"px"}else if(opts.zoom_type=="tlbr"){c=0;d=0}else if(opts.zoom_type=="trbl"){c=0;d=b+"px"}else if(opts.zoom_type=="bltr"){c=0;d=b+"px"}else if(opts.zoom_type=="brtl"){c=a+"px";d=b+"px"}$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex).animate({left:c,top:d,width:0,height:0},opts.speed,function(){$("#"+cId+"-gpImageRotate-DisplayCntnr-"+selectedIndex).css("display","none");tf=reOrderDisplayCntnr();if(opts.transition_direction=="out"){$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex).css({left:0,top:0,width:a+"px",height:b+"px"})}updateSelectedIndex();currentIndex=selectedIndex})}function doSqueezeIn(){var a;var b=getSelectedIndex();transitionStarted=true;$("#"+cId+"-gpImageRotate-DisplayCntnr-"+b).css("display","block");if(opts.transition_axis=="x"){var c=$("#"+cId+"-gpImageRotate-DisplayCntnr-"+b).data("dim").w;$("#"+cId+"-gpImageRotate-DisplayCntnr-"+b).animate({width:c+"px",left:0},opts.speed,function(){currentIndex=b;setPrimaryNav();setTimeout(transitionOutMethod,opts.interval)})}else{var d=$("#"+cId+"-gpImageRotate-DisplayCntnr-"+b).data("dim").h;$("#"+cId+"-gpImageRotate-DisplayCntnr-"+b).animate({height:d+"px",top:0},opts.speed,function(){currentIndex=b;setPrimaryNav();setTimeout(transitionOutMethod,opts.interval)})}}function doSqueezeOut(){var a;doInOut();if(opts.transition_axis=="x"){var b=$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex).data("dim").w;$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex).animate({width:0,left:b/2+"px"},opts.speed,function(){$("#"+cId+"-gpImageRotate-DisplayCntnr-"+selectedIndex).css("display","none");a=reOrderDisplayCntnr();if(opts.transition_direction=="out"){$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex).css({width:b+"px",left:0})}updateSelectedIndex();currentIndex=selectedIndex})}else{var c=$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex).data("dim").h;$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex).animate({height:0,top:c/2+"px"},opts.speed,function(){a=reOrderDisplayCntnr();if(opts.transition_direction=="out"){$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex).css({height:c+"px",top:0})}updateSelectedIndex();currentIndex=selectedIndex})}}function doSlicedIn(){var a;var b=getSelectedIndex();transitionStarted=true;if(opts.transition_axis=="x"){var c=$("#"+cId+"-gpImageRotate-DisplayCntnr-"+b).data("dim").w;$("#"+cId+"-gpImageRotate-DisplayCntnr-"+b+" .gpImageRotate-Sliced-Image").animate({width:c+"px"},opts.speed,function(){if($(this).is(":last-child")){currentIndex=b;setTimeout(transitionOutMethod,opts.interval)}})}else{var d=$("#"+cId+"-gpImageRotate-DisplayCntnr-"+b).data("dim").h;$("#"+cId+"-gpImageRotate-DisplayCntnr-"+b+" .gpImageRotate-Sliced-Image").animate({height:d+"px"},opts.speed,function(){if($(this).is(":last-child")){currentIndex=b;setTimeout(transitionOutMethod,opts.interval)}})}}function doSlicedOut(){var a;doInOut();if(opts.transition_axis=="x"){$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex+" .gpImageRotate-Sliced-Image").animate({width:0},opts.speed,function(){if($(this).is(":last-child")){a=reOrderDisplayCntnr();if(opts.transition_direction=="out"){var b=$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex).data("dim").w;$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex+" .gpImageRotate-Sliced-Image").css("width",b+"px")}updateSelectedIndex();currentIndex=selectedIndex}})}else{$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex+" .gpImageRotate-Sliced-Image").animate({height:0},opts.speed,function(){if($(this).is(":last-child")){a=reOrderDisplayCntnr();if(opts.transition_direction=="out"){var b=$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex).data("dim").h;$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex+" .gpImageRotate-Sliced-Image").css("height",b+"px")}updateSelectedIndex();currentIndex=selectedIndex}})}}function doPixelsIn(){function e(){var f=$("#"+cId+"-gpImageRotate-Sliced-Image-"+a+"-Cell-"+b[d]);$(f).css("visibility","visible");if(d<c){d++;setTimeout(e,.5)}else{transitionStarted=true;currentIndex=a;setPrimaryNav();setTimeout(transitionOutMethod,opts.interval)}}var a=getSelectedIndex();var b=aPixels[a];var c=b.length;b.shuffle();var d=0;setTimeout(e,.5)}function doPixelsOut(){function d(){var e=$("#"+cId+"-gpImageRotate-Sliced-Image-"+currentIndex+"-Cell-"+a[c]);$(e).css("visibility","hidden");if(c<b){c++;setTimeout(d,.5)}else{var f=reOrderDisplayCntnr();if(opts.transition_direction=="out"){$("#"+cId+"-gpImageRotate-DisplayCntnr-"+currentIndex+" .gpImageRotate-Sliced-Image").css("visibility","visible")}updateSelectedIndex();currentIndex=selectedIndex}}doInOut();var a=aPixels[currentIndex];var b=a.length;a.shuffle();var c=0;setTimeout(d,.5)}function doInOut(){if(opts.transition_direction=="inOut"){transitionInMethod()}}function getSelectedIndex(){var a=transitionStarted?selectedIndex+1:selectedIndex;if(a==totalItems&&opts.transition_direction=="inOut"){a=0}if(opts.transition_direction=="inOutIn"){a=selectedIndex}return a}function updateSelectedIndex(){if(selectedIndex==totalItems-1){selectedIndex=0}else{selectedIndex++}if(opts.transition_direction=="out"){if(selectedIndex==0){$("#"+cId+" .gpImageRotate-DisplayCntnr").show()}setTimeout(transitionOutMethod,opts.interval)}else if(opts.transition_direction=="inOutIn"){transitionInMethod()}}function reOrderDisplayCntnr(){var a=0;for(var b=0;b<totalItems;b++){if(b==currentIndex){$("#"+cId+"-gpImageRotate-DisplayCntnr-"+b).css("zIndex",0)}else{a=$("#"+cId+"-gpImageRotate-DisplayCntnr-"+b).css("zIndex");$("#"+cId+"-gpImageRotate-DisplayCntnr-"+b).css("zIndex",Number(a)+1)}}return true}function imgFadeIn(){$("#"+cId+"-gpImageRotate-DisplayCntnr-"+selectedIndex).fadeIn(opts.speed,function(){imgFadeOut()})}function imgFadeOut(){$("#"+cId+"-gpImageRotate-DisplayCntnr-"+selectedIndex).fadeOut(opts.speed,function(){selectedIndex=selectedIndex==totalItems-1?0:selectedIndex+1;imgFadeIn()})}function nextImage(){if(selectedIndex<totalItems-1){selectedIndex++;showImage()}}function previousImage(){if(selectedIndex>0){selectedIndex--;showImage()}}function setMoveInterval(){setInterval(intervalMove,opts.interval)}function intervalMove(){selectedIndex=selectedIndex<totalItems-1?selectedIndex+1:0;doLinearMove()}function showImage(){if(opts.mode=="simplegallery"){showLargeImage()}else{doLinearMove()}}function showLargeImage(){var a=$("#"+cId+"-gpImageRotate-Primary-Nav ul li")[selectedIndex];var b=$(a).children("img")[0];var c=$(b).attr("src");var d=$(b).data("dim").w;var e=$(b).data("dim").h;var f=$this.width();var g=(f-d)/2;b=new Image;$(b).attr("src",c);$("#"+cId+"-gpImageRotate-GalleryLargeCntnr").empty().show();if(opts.large_display_mode=="default"){$("#"+cId+"-gpImageRotate-GalleryLargeCntnr").css({width:d+"px",height:e+"px","margin-left":g+"px"}).append($(b))}else{$("#"+cId+"-gpImageRotate-GalleryLargeCntnr").animate({width:d+"px",height:e+"px","margin-left":g+"px"},opts.speed,function(){$(this).append($(b))})}}function setPrimaryNav(){$("#"+cId+"-gpImageRotate-Primary-Nav ul li").removeClass("gpImageRotate-nav-default-selected");var a=$("#"+cId+"-gpImageRotate-Primary-Nav ul li")[selectedIndex];$(a).addClass("gpImageRotate-nav-default-selected")}function doLinearMove(){if(opts.desc_display.display=="onload"){}var a=selectedIndex<totalItems-1?selectedIndex+1:0;var b=$("#"+cId+"-gpImageRotateImage-"+currentIndex);var c=$("#"+cId+"-gpImageRotateImage-"+selectedIndex);var d=$("#"+cId+"-gpImageRotateImage-"+a);var e=$(b).height();var f=opts.mode=="steps"?$(b).css("width"):$(b).width();if(opts.mode=="portfolio"){var g=-(selectedIndex*displayWidth);$("#"+cId+"-gpImageRotate-Slider").animate({left:g+"px"},opts.speed,function(){setPrimaryNav()});if(opts.desc_display.display=="onload"){descShow(cId,selectedIndex)}}else{$(b).animate({"margin-left":"-"+f},opts.speed,function(){setPrimaryNav();$(b).parent().parent().appendTo($("#"+cId+"-gpImageRotate-Slider"));$(b).css("margin-left","0px");if(opts.mode=="steps"){$(b).width($(c).data("size").sW).css("margin-top",margTop+"px")}if(opts.desc_display.display=="onload"){descShow(cId,currentIndex)}})}if(opts.mode=="steps"){$(c).animate({width:$(c).data("size").sW,height:$(c).data("size").sH,"margin-top":margTop+"px"},opts.speed);$(d).animate({width:$(d).data("size").lW,height:$(d).data("size").lH,"margin-top":0},opts.speed)}currentIndex=selectedIndex}function createCntnr(a){$this.append($("<div></div>").attr({id:a+"-gpImageRotate-SlideCntnr","class":"gpImageRotate-SlideCntnr"}).append($("<div></div>").attr({id:a+"-gpImageRotate-Slider","class":"gpImageRotate-Slider"})));if(opts.side_nav.display=="onload"||opts.side_nav.display=="onhover"){$("#"+a+"-gpImageRotate-SlideCntnr").append($("<a />").attr({id:a+"-gpImageRotate-PrevBtn","class":"gpImageRotate-PrevBtn"}).click(function(){previousImage()}),$("<a />").attr({id:a+"-gpImageRotate-NextBtn","class":"gpImageRotate-NextBtn"}).click(function(){nextImage()}));if(opts.side_nav.display=="onhover"){$("#"+a+"-gpImageRotate-PrevBtn").hide();$("#"+a+"-gpImageRotate-NextBtn").hide()}}}function createGalleryCntnr(a){opts.primary_nav.display_type="thumb";showPrimaryNav=true;var b=getPrimaryNav(a);var c=createThumbNav(a,b);$this.append($(b));if(opts.large_display_mode=="lightbox"){$this.append($("<div></div>").attr({id:a+"-gpImageRotate-GalleryLargeCntnr","class":"gpImageRotate-GalleryLargeCntnr"}))}else{var d=$("<div></div>").attr({id:a+"-gpImageRotate-DisplayCntnr","class":"gpImageRotate-DisplayCntnr"}).append($("<div></div>").attr({id:a+"-gpImageRotate-GalleryLargeCntnr","class":"gpImageRotate-GalleryLargeCntnr"}));if(opts.primary_nav.display=="top"){$this.append($(d))}else if(opts.primary_nav.display=="bottom"){$this.prepend($(d))}}}function createPrimaryNavCntnr(a){if(opts.primary_nav.display){if(opts.primary_nav.display=="top"||opts.primary_nav.display=="bottom"){showPrimaryNav=true;var b=opts.primary_nav.display_type?opts.primary_nav.display_type:"default";var c=getPrimaryNav(a);if(b=="thumb"){var d=createThumbNav(a,c)}else{$(c).append($("<ul></ul>"))}if(opts.primary_nav.display=="top"){$this.prepend($(c))}else if(opts.primary_nav.display=="bottom"){$this.append($(c))}$(c).show()}}}function getPrimaryNav(a){var b=$("<div></div>").attr({id:a+"-gpImageRotate-Primary-Nav","class":"gpImageRotate-Primary-Nav"});return b}function createThumbNav(a,b){var c=opts.primary_nav.show_thumb_nav?opts.primary_nav.show_thumb_nav:false;if(c){$(b).append($("<a></a>").attr({id:a+"-gpImageRotate-nav-thumb-PrevBtn","class":"gpImageRotate-nav-thumb-PrevBtn"}).click(function(){prevThumb()}),$("<div></div>").attr({id:a+"-gpImageRotate-Primary-Nav-SlideCntnr","class":"gpImageRotate-Primary-Nav-SlideCntnr"}).append($("<ul></ul>")),$("<a></a>").attr({id:a+"-gpImageRotate-nav-thumb-NextBtn","class":"gpImageRotate-nav-thumb-NextBtn"}).click(function(){nextThumb()}))}else{$(b).append($("<ul></ul>"))}return true}function prevThumb(){if(thumbIndex>0){thumbIndex--;moveThumbCntnr()}}function nextThumb(){if(thumbIndex<totalItems-1){thumbIndex++;moveThumbCntnr()}}function moveThumbCntnr(){var a=$("#"+cId+"-gpImageRotate-Primary-Nav ul li")[thumbIndex];var b=getTotalWidth(a);b=thumbIndex==0?b:b*thumbIndex;$("#"+cId+"-gpImageRotate-Primary-Nav ul").css("margin-left",-b+"px")}function getTotalWidth(a){var b=$(a).width();var c=parseInt($(a).css("margin-left"));var d=parseInt($(a).css("margin-right"));var e=parseInt($(a).css("padding-left"));var f=parseInt($(a).css("padding-right"));return b+c+d+e+f}function createPrimaryNavItem(a,b,c){if(showPrimaryNav){var d=opts.primary_nav.display_type?opts.primary_nav.display_type:"default";var e=$("<li />").data("liIndex",a);$("#"+b+"-gpImageRotate-Primary-Nav ul").append($(e));if(d=="default"){$(e).addClass("gpImageRotate-nav-default");if(a==0){$(e).addClass("gpImageRotate-nav-default-selected")}}else if(d=="thumb"){$(e).append(getThumbNav(a,b,c));$(e).addClass("gpImageRotate-nav-thumb");if(a==0){$(e).addClass("gpImageRotate-nav-thumb-selected")}}}}function getThumbNav(a,b,c){var d=c[0];var e=opts.primary_nav.thumb_height?parseInt(opts.primary_nav.thumb_height):30;var f=new Image;var g=d.pic;if(g==""){var h=$("#"+b+"-gpImageRotate-DisplayCntnr-"+a).css("background-image");g=extractImageUrl(h)}imgSize=getNewSize(c[1],c[2],e,"height");$(f).attr({src:g,title:d.title}).css({width:imgSize[0],height:imgSize[1]}).data("dim",{w:c[1],h:c[2]});if(opts.mode=="simplegallery"&&opts.large_display_mode=="lightbox"){var i=$("<a />").attr({href:g,title:d.title}).append($(f));return i}return f}function extractImageUrl(a){return a.replace(/"/g,"").replace(/url\(|\)$/ig,"")}function createPrimaryNavClickEvent(a){if(showPrimaryNav){if(opts.mode=="simplegallery"&&opts.large_display_mode=="lightbox"){$("#"+a+"-gpImageRotate-Primary-Nav ul li a").colorbox({rel:"group-imagerotate-1"})}else{$("#"+a+"-gpImageRotate-Primary-Nav ul li").click(function(){selectedIndex=$(this).data("liIndex");showImage()})}}}function createImages(a,b){var c,d,e;for(var f=0;f<totalItems;f++){e=getImageObject(b[f]);if(opts.mode=="blinds"||opts.mode=="curtains"||opts.mode=="pixels"){c=createSlicedImage(f,a,e)}else if(opts.mode=="simplegallery"){d=createGalleryImage(f,a,e);createPrimaryNavItem(f,a,d)}else{d=createImage(f,a,e);createPrimaryNavItem(f,a,d)}}if(opts.mode=="simplegallery"&&opts.large_display_mode!="lightbox"){showLargeImage()}return true}function createGalleryImage(a,b,c){var d=getImageSize(b+"-gpImageRotate-GalleryLargeCntnr",c);return[c,d[0],d[1]]}function createSlicedImage(a,b,c){var d=$("<div></div>").attr({id:b+"-gpImageRotate-DisplayCntnr-"+a,"class":"gpImageRotate-DisplayCntnr"}).css("zIndex",totalItems-a);$(d).appendTo("#"+b);var e=getImageSize(b+"-gpImageRotate-DisplayCntnr-"+a,c);var f=c.url!=""?"<a />":"<div />";var g=0;var h=0;if(opts.mode=="blinds"){g=h=numSegments}else if(opts.mode=="pixels"){var i=getPixelCount(e);g=i[0];h=i[1]}else{g=h=2}var j=0;var k="";var l="";var m=[];var n=0;var o=createSlicedCSS(b+"-gpImageRotate-DisplayCntnr-"+a,e,g,h);$(d).data("dim",{w:o[0],h:o[1]});for(var p=0;p<g;p++){l=$(f).addClass("gpImageRotate-Sliced-Image").css("background-image",'url("'+c.pic+'")');$(d).append($(l));var q=0;if(opts.mode=="pixels"){for(var r=0;r<h;r++){l=$(f).addClass("gpImageRotate-Sliced-Image").css("background-image",'url("'+c.pic+'")');$(d).append($(l));$(l).attr("id",b+"-gpImageRotate-Sliced-Image-"+a+"-Cell-"+n).css({"background-position":-j+"px "+ -q+"px",left:j+"px",top:q+"px"});m.push(n);q+=o[1];n++;if(opts.transition_direction=="inOut"||opts.transition_direction=="inOutIn"){$(l).css("visibility","hidden")}}j+=o[0]}else{if(opts.transition_axis=="x"){$(l).css("background-position",-j+"px 0");if(opts.mode=="blinds"){$(l).css("left",j+"px")}else if(opts.mode=="curtains"){if(p==0){$(l).css("left","0")}else{$(l).css("right","0")}}if(opts.transition_direction=="inOut"||opts.transition_direction=="inOutIn"){$(l).css("width","0px")}j+=o[0]}else if(opts.transition_axis=="y"){$(l).css("background-position","0 -"+j+"px");if(opts.mode=="blinds"){$(l).css("top",j+"px")}else if(opts.mode=="curtains"){if(p==0){$(l).css("top","0")}else{$(l).css("bottom","0")}}if(opts.transition_direction=="inOut"||opts.transition_direction=="inOutIn"){$(l).css("height","0px")}j+=o[1]}}}if(opts.mode=="pixels"){aPixels[a]=m;}if(c.url!=""){$("#"+b+"-gpImageRotate-DisplayCntnr-"+a+" a").attr({href:c.url,target:c.tgt})}}function createImage(a,b,c){var d,e,f=0,g=0,h;var i=new Image;var j=$("<div></div>").attr({id:b+"-gpImageRotate-DisplayCntnr-"+a,"class":"gpImageRotate-DisplayCntnr"});if(c.cls!=""){$(j).addClass(c.cls);f=$(j).css("width");g=$(j).css("height")}else if(c.url==""){if(c.links==""){$(j).append($(i).attr({src:c.pic,title:c.title}))}else{$(j).css("background-image",'url("'+c.pic+'")')}}if(c.image_width!=0){f=c.image_width;g=c.image_height;$(j).css({width:c.image_width+"px",height:c.image_height+"px"})}if(c.links){$.each(c.links,function(a,b){e=b.link_target?b.link_target:"_self";d=$("<a></a>").attr({href:b.link_url,target:e});if(b.link_class){$(d).addClass(b.link_class)}else{$(d).css({top:b.link_top+"px",left:b.link_left+"px",height:b.link_height+"px",width:b.link_width+"px"});if(b.link_color){$(d).css("color",b.link_color)}if(b.link_bck_color){$(d).css("background-color",b.link_bck_color)}if(b.link_bck_image){$(d).css("color","background-image",'url("'+b.link_bck_image+'")')}}if(b.link_text){$(d).html(b.link_text)}$(j).append($(d))})}else if(c.url!=""||opts.image_url=="self"){d=$("<a></a>").attr({href:c.url,target:c.tgt});if(c.cls==""){$(d).append($(i).attr({src:c.pic,title:c.title,id:b+"-gpImageRotateImage-"+a}))}else{$(d).addClass("gpImageRotate-link-entire-container").css({display:"block",width:f,height:g})}$(j).append($(d))}if(c.desc!=""){var k=opts.desc_display.display_width?opts.desc_display.display_width:"100%";$(j).append($("<div></div>").attr({id:b+"-gpImageRotate-TextCntnr-"+a,"class":"gpImageRotate-TextCntnr",width:k}).html(c.desc))}if(stackedAR.indexOf(opts.mode)!=-1){$(j).appendTo("#"+b)}else{$(j).appendTo("#"+b+"-gpImageRotate-Slider")}aImages[a]=$(j).width();$(j).data("displayOptions",{on_show:c.onshow});if(c.desc!="")h=setDescDisplayPosition(b,a);if(opts.mode=="steps"){h=initImageSize(i,a)}else if(opts.mode=="fade"){$(j).css("zIndex",totalItems-a);if(opts.transition_direction=="inOut"||opts.transition_direction=="inOutIn"){$(j).css("display","none")}}else if(opts.mode=="zoom"||opts.mode=="squeeze"){var l=$("#"+b+"-gpImageRotate-DisplayCntnr-"+a).width();var m=$("#"+b+"-gpImageRotate-DisplayCntnr-"+a).height();$(j).css("zIndex",totalItems-a).data("dim",{w:l,h:m});if(opts.mode=="zoom"){if(opts.zoom_type=="center"){$(j).css({left:l/2+"px",top:m/2+"px"})}else{$(j).css({left:0,top:0})}}if(opts.transition_direction=="inOut"||opts.transition_direction=="inOutIn"){$(j).css("display","none");if(opts.mode=="zoom"){$(j).css({width:0,height:0});if(opts.zoom_type=="trbl"||opts.zoom_type=="bltr"){$(j).css("top",m+"px")}else if(opts.zoom_type=="brtl"){$(j).css({left:l+"px",top:m+"px"})}}else{if(opts.transition_axis=="x"){$(j).css({left:l/2+"px",top:0,width:0,height:m+"px"})}else{$(j).css({left:0,top:m/2+"px",width:l+"px",height:0})}}}}if(opts.image_url=="self"){if(opts.max_height||opts.max_width){h=setMaxSize(i,c)}}if(f==0){f=$(j).width();g=$(j).height()}return[c,f,g]}function getImageObject(a){var b=new Object;b.pic=opts.base_path+a[0];b.url=a[1];b.title=decodeURIComponent(a[2]);b.desc=decodeURIComponent(a[3]),b.tgt=a[4];b.cls=a[5];b.onshow=a[6];b.links=a[7];b.image_width=a[8];b.image_height=a[9];return b}function setDescDisplayPosition(a,b){var c=opts.desc_display.display_position?opts.desc_display.display_position:"bottom";var d=$("#"+a+"-gpImageRotate-DisplayCntnr-"+b).width();var e=$("#"+a+"-gpImageRotate-DisplayCntnr-"+b).height();var f=$("#"+a+"-gpImageRotate-TextCntnr-"+b).height();var g=e+f;if(c=="top"){if(descAnimType=="none"||descAnimType=="fade"){$("#"+a+"-gpImageRotate-TextCntnr-"+b).css({top:-e+"px",left:"0px"}).data("position",{topStart:-e+"px",leftStart:0,topEnd:-e+"px",leftEnd:0})}else if(descAnimType=="slideX"){$("#"+a+"-gpImageRotate-TextCntnr-"+b).css({top:-e+"px",left:d+"px"}).data("position",{topStart:-e+"px",leftStart:d+"px",topEnd:-e+"px",leftEnd:0})}else if(descAnimType=="slideY"){$("#"+a+"-gpImageRotate-TextCntnr-"+b).css({top:-g+"px",left:"0px"}).data("position",{topStart:-g+"px",leftStart:0,topEnd:-e+"px",leftEnd:0})}}else if(c=="bottom"){if(descAnimType=="none"||descAnimType=="fade"){$("#"+a+"-gpImageRotate-TextCntnr-"+b).css({top:-f+"px",left:"0px"}).data("position",{topStart:-f+"px",leftStart:0,topEnd:-f,leftEnd:0})}else if(descAnimType=="slideX"){$("#"+a+"-gpImageRotate-TextCntnr-"+b).css({top:-f+"px",left:d+"px"}).data("position",{topStart:-f+"px",leftStart:d+"px",topEnd:-f+"px",leftEnd:0})}else if(descAnimType=="slideY"){$("#"+a+"-gpImageRotate-TextCntnr-"+b).css({top:"0px",left:"0px"}).data("position",{topStart:0,leftStart:0,topEnd:-f+"px",leftEnd:0})}}if(opts.desc_display.display=="onhover"){var h=setDescHoverDisplay(a,b)}return true}function setSideNavHoverDisplay(){$("#"+cId+" .gpImageRotate-DisplayCntnr a").hover(function(){toggleSideNav("show")},function(){setTimeout(toggleSideNav,1e3)})}function toggleSideNav(a){if(a=="show"){$("#"+cId+"-gpImageRotate-PrevBtn").show();$("#"+cId+"-gpImageRotate-NextBtn").show()}else{$("#"+cId+"-gpImageRotate-PrevBtn").hide();$("#"+cId+"-gpImageRotate-NextBtn").hide()}}function setDescHoverDisplay(a,b){$("#"+a+"-gpImageRotate-DisplayCntnr-"+b+" a").hover(function(){descShow(a,b)},function(){setTimeout(descHide,1e3)})}function descShow(a,b){txtCntnr=$("#"+cId+"-gpImageRotate-TextCntnr-"+b);if(descAnimType=="none"){$(txtCntnr).show()}else if(descAnimType=="fade"){doDescFade("in")}else if(descAnimType=="slideX"){doDescSlideX("in")}else if(descAnimType=="slideY"){doDescSlideY("in")}}function descHide(){if(descAnimType=="none"){$(txtCntnr).hide()}else if(descAnimType=="fade"){doDescFade("out")}else if(descAnimType=="slideX"){doDescSlideX("out")}else if(descAnimType=="slideY"){doDescSlideY("out")}}function doDescFade(a){if(a=="in"){$(txtCntnr).fadeIn("slow")}else{$(txtCntnr).fadeOut("slow")}}function doDescSlideX(a){var b;if(a=="in"){$(txtCntnr).show();b=$(txtCntnr).data("position").leftEnd;$(txtCntnr).animate({left:b},opts.speed)}else{b=$(txtCntnr).data("position").leftStart;$(txtCntnr).animate({left:b},opts.speed,function(){$(txtCntnr).hide()})}}function doDescSlideY(a){var b;if(a=="in"){$(txtCntnr).show();b=$(txtCntnr).data("position").topEnd;$(txtCntnr).animate({top:b},opts.speed)}else{b=$(txtCntnr).data("position").topStart;$(txtCntnr).animate({top:b},opts.speed,function(){$(txtCntnr).hide()})}}function setTransitionMethods(){switch(opts.mode){case"fade":transitionInMethod=eval("doFadeIn");transitionOutMethod=eval("doFadeOut");break;case"curtains":transitionInMethod=eval("doSlicedIn");transitionOutMethod=eval("doSlicedOut");break;case"blinds":transitionInMethod=eval("doSlicedIn");transitionOutMethod=eval("doSlicedOut");break;case"pixels":transitionInMethod=eval("doPixelsIn");transitionOutMethod=eval("doPixelsOut");break;case"zoom":transitionInMethod=eval("doZoomIn");transitionOutMethod=eval("doZoomOut");break;case"squeeze":transitionInMethod=eval("doSqueezeIn");transitionOutMethod=eval("doSqueezeOut");break}return true}function getPixelCount(a){var b=numSegments;var c=a[0]/b;var d=a[1]/b;return[c,d]}function createSlicedCSS(a,b,c,d){var e;var f=b[0]/c;var g=b[1]/d;var h=$("<style type='text/css'></style>").appendTo("head");if(opts.mode=="pixels"){e="width:"+f+"px;height:"+g+"px;"}else{if(opts.transition_axis=="x"){e="width:"+f+"px;height:"+b[1]+"px;";g=b[1]}else{e="width:"+b[0]+"px;height:"+g+"px;";f=b[0]}}h.append("#"+a+" .gpImageRotate-Sliced-Image {position:absolute;display:block;"+e+"}");return[f,g]}function on_show(a){var b=$("#"+a).data("displayOptions").on_show;if(b!=""){var c=b;if(c!=""){window[c](a)}}}function setMaxSize(a,b){var c,d;var e=b[5];var f=b[6];if(opts.max_height){d=getNewSize(e,f,opts.max_height,"height")}else if(opts.max_width){d=getNewSize(e,f,opts.max_width,"width")}$(a).css({width:d[0],height:d[1]});return true}function initImageSize(a,b){var c,d;var e=$(a).width();var f=$(a).height();d=getNewSize(e,f,parseInt(opts.steps_small_height),"height");lrgSize=getNewSize(e,f,parseInt(opts.steps_large_height),"height");if(b==1){$(a).css({width:lrgSize[0],height:lrgSize[1]})}else{$(a).css({width:d[0],height:d[1],"margin-top":margTop+"px"})}$(a).data("size",{sW:d[0],sH:d[1],lW:lrgSize[0],lH:lrgSize[1]});return true}function adjustImageSize(a,b){var c=a>b?b/a:1;return c}function getNewSize(a,b,c,d){var e=d=="height"?b:a;var f=adjustImageSize(e,c);var g=b*f;var h=a*f;return[h,g]}function getImageSize(a,b){var c;if(b.image_width!=0){c=[b.image_width,b.image_height]}else{var d=new Image;$("#"+a).append($(d).attr("src",b.pic));c=[$(d).width(),$(d).height()];$("#"+a).empty()}return c}var $this=$(obj);var cId,margTop;var totalItems=0,displayWidth,currentIndex=0,selectedIndex=0,nLeft=0,ttlWidth=0,txtCntnr="",thumbIndex=0;var showPrimaryNav=false;var aImages=[];var aPixels=[];var numSegments=opts.mode=="blinds"?4:10;if(opts.segments!=""){numSegments=opts.segments}var stackedAR=["random","fade","curtains","blinds","squeeze","zoom","pixels"];var transitionStarted=false;var transitionInMethod="";var transitionOutMethod="";var descAnimType=opts.desc_display.anim_type?opts.desc_display.anim_type:"none";if(opts.easing){jQuery.easing.def=opts.easing}if(opts.image_url){if(opts.image_url=="self"){doCreate("self")}else{doAjax("GET",opts.image_url,"","",doCreate)}}else if(opts.images){doCreate(opts.images)}else{alert("No Images to load")}};$.imageRotate.defaults={mode:"random",steps_large_height:"",steps_small_height:"",interval:"",image_url:"",images:"",return_type:"json",base_path:"",url_target:"_blank",data_map:"",speed:1500,easing:"easeOutElastic",transition_direction:"out",side_nav:{display:"none"},primary_nav:{display:"none",display_type:"default",thumb_height:"30px",show_thumb_nav:false},desc_display:{display:"none",anim_type:"none",display_position:"bottom",display_width:"100%"},max_height:"",max_width:"",segments:"",transition_axis:"x",zoom_type:"center",large_display_mode:"default"}})(jQuery)